/* O Postgres nao aceita de jeito nenhum o uso do comando "\c <banco de dados> <user>;" sem pedir senha, (comando necessario para se conectar com outro usuario no mesmo*/ 
/* ou em outro bd), mesmo que no "CREATE USER" eu usasse a caracteristica "NOLOGIN" ou nao usasse "PASSWORD/ENCRYPTED PASSWORD", ele pede a senha mesmo nao existindo, */
/* obviamente dando erro. E se eu usar o user com senha junto ao resto do script, nao vai funcionar, ele nem te da a oportunidade de escrever a senha, e vai bugar todos */
/* os outros comandos, entao dividi meu script em dois, a fim de nao  bugar todo meu codigo. SENHA DO USER: maria */
 
DROP DATABASE IF EXISTS uvv; -- Inserindo um comando para deletar o banco de dados com o mesmo nome que eu irei criar, caso exista.
DROP USER IF EXISTS natan;   -- Inserindo um comando para deletar o usuario com o mesmo nome que eu irei criar, caso exista.

CREATE USER natan WITH  -- Criando meu user.
  LOGIN -- Direito a login
  NOSUPERUSER -- Sem poderes de superusuario.
  INHERIT -- Alguma interacao de criacao de tabelas que eu nao compreendi muito bem, mas decidi integrar no meu user.
  CREATEDB -- Direito a criar bancos de dados.
  CREATEROLE -- Direito a criar roles. 
  REPLICATION -- Direito a transferir dados entre bancos de dados.
  ENCRYPTED PASSWORD '123';

-- Criando o banco de dados uvv.

CREATE DATABASE uvv 
WITH OWNER = natan  -- Meu user tem como dono.
TEMPLATE = template0 
ENCODING = 'UTF8' 
LC_COLLATE = 'pt_BR.UTF-8' 
LC_CTYPE = 'pt_BR.UTF-8'
ALLOW_CONNECTIONS = true;

-- Colocando o path do meu usuario para o esquema elmasri.

ALTER USER natan
SET SEARCH_PATH TO elmasri, "$user", public;

-- Me conectando no banco de dados uvv, com meu usuario.
-- ATENCAO !!! SENHA: maria
\c uvv natan;
